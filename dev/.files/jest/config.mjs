#!/usr/bin/env node
/**
 * Jest config.
 *
 * @note PLEASE DO NOT EDIT THIS FILE!
 * @note This entire file will be updated automatically.
 * @note Instead of editing here, please review <https://github.com/clevercanyon/skeleton>.
 */
/* eslint-env es2021, node */

import fs from 'node:fs';
import path from 'node:path';
import { dirname } from 'desm';

const __dirname = dirname(import.meta.url);
const projDir = path.resolve(__dirname, '../../..');

/**
 * Defines Jest configuration.
 */
export default async (/* {} */) => {
	const srcDir = path.resolve(projDir, './src');
	const srcDirExists = fs.existsSync(srcDir);

	const testsDir = path.resolve(projDir, './tests');
	const testsDirExists = fs.existsSync(testsDir);

	return {
		roots: [
			...(srcDirExists ? [srcDir] : []), //
			...(testsDirExists ? [testsDir] : []),
			...(!srcDirExists && !testsDirExists ? [projDir] : []),
		],
	};
};
