/**
 * A16s directory config file.
 *
 * Vite is not aware of this config file's location.
 *
 * @note PLEASE DO NOT EDIT THIS FILE!
 * @note This entire file will be updated automatically.
 * @note Instead of editing here, please review <https://github.com/clevercanyon/skeleton>.
 *
 * @see https://github.com/vitejs/vite-plugin-basic-ssl
 */

import path from 'node:path';

/**
 * Configures a16s directory for Vite.
 *
 * @param   props Props from vite config file driver.
 *
 * @returns       A16s directory for Vite.
 */
export default async ({ isSSRBuild, distDir }) => {
	// In the case of doing a secondary SSR build, we need to separate the SSR assets from the client-side assets.
	// The special folder `node_modules` was selected because it's ignored by Wrangler; see <https://o5p.me/EqPjmv>.
	// Wrangler compiles all SSR assets (wherever they live) when it does it's own bundling of the `./dist` directory.
	return path.resolve(distDir, '.' + (isSSRBuild ? '/node_modules' : '') + '/assets/a16s');
};
