/**
 * Experimental configuration.
 *
 * Vite is not aware of this config file's location.
 *
 * @note PLEASE DO NOT EDIT THIS FILE!
 * @note This entire file will be updated automatically.
 * @note Instead of editing here, please review <https://github.com/clevercanyon/skeleton>.
 *
 * @see https://o5p.me/wt4tkm Experimental options in source.
 */

/**
 * Configures experimentals.
 *
 * @param   props Props from vite config file driver.
 *
 * @returns       Experimental configuration.
 */
export default async (/* {} */) => {
    return {
        expConfig: {
            importGlobRestoreExtension: true, // Restores file extension on glob imports containing a query string.
            // This is needed by our use of the MDX plugin for Vite; e.g., when we glob MDX files to import frontMatter,
            // we add a query to make the glob import distinct from other dynamic imports of the same file elsewhere.
            // Enabling this option restores the `.mdx` extension, such that the MDX plugin still considers
            // the import to be an MDX file; i.e., given that it ends with a query string otherwise.

            // Another way to accomplish the same thing is to set the query string to a value that ends with `.mdx`.
            // Just documenting this for future reference in case the experimental option goes away or changes.
        },
    };
};
