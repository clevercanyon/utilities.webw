/**
 * Rehype plugin.
 *
 * @note PLEASE DO NOT EDIT THIS FILE!
 * @note This entire file will be updated automatically.
 * @note Instead of editing here, please review <https://github.com/clevercanyon/skeleton>.
 */

import { visit as unistVisit } from 'unist-util-visit';

/**
 * Modifies image tags without a `loading` attribute, making them `loading="lazy"` for improved performance.
 */
export default () => {
    return (tree) => {
        unistVisit(tree, 'element', (node) => {
            if ('img' === node.tagName && !node.properties.loading) {
                node.properties.loading = 'lazy';
            }
            return node;
        });
    };
};
